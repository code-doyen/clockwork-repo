<script>
    document.onreadystatechange = () => {
        if (document.readyState === 'complete') {
            // document ready
            PopulateSelector();
            PopulateTable();
        }
    };
    function PopulateSelector() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("timeZone").innerHTML = this.responseText;
            }
        };
        xhttp.open("GET", "http://localhost:25648/api/currenttime/zoneselector", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();
    }
    function PopulateTable() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("output").innerHTML += this.responseText;
            }
        };
        xhttp.open("GET", "http://localhost:25648/api/currenttime/selectall", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();
    }
    function UserAction() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("output").innerHTML = '<tr id="insertion" class="alert-success"></tr>';
                PopulateTable();
                document.getElementById("insertion").innerHTML += this.responseText;
                document.getElementById("insertion").lastChild.innerHTML += '<i class="material-icons float-right">alarm_on</i>';
            }
        };
        xhttp.open("POST", "http://localhost:25648/api/currenttime", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send(document.getElementById("timeZone").selectedIndex);
    }
</script>
<div class="input-group py-3 mb-1">
    <div class="input-group-prepend">
        <label class="input-group-text" for="timeZone"><i class="material-icons">update</i>Options</label>
    </div>
    <select id="timeZone" class="custom-select">
        <!--table entries added via above with javaScript xhttp request-->
    </select>
    <div class="input-group-append">
        <button class="btn btn-outline-success" type="submit" onclick="UserAction()">Get the time</button>
    </div>
</div>
<table class="table table-hover table-responsive-lg">
    <thead>
        <tr>
            <th scope="col">Id#</th>
            <th scope="col">Server Time</th>
            <th scope="col">Client IP</th>
            <th scope="col">UTC Time</th>
            <th scope="col">Time Zone Stamp</th>
        </tr>
    </thead>
    <tbody id="output">
        <tr id="insertion" class="alert-success"></tr>
        <!--table entries added via above with javaScript xhttp request and Jquery -->
    </tbody>
</table>
